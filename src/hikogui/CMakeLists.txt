# Copyright Jens A. Koch 2021.
# Copyright Take Vos 2020-2022.
# Distributed under the Boost Software License, Version 1.0.
# (See accompanying file LICENSE_1_0.txt or copy at https://www.boost.org/LICENSE_1_0.txt)

add_subdirectory(audio)
add_subdirectory(char_maps)
add_subdirectory(codec)
add_subdirectory(color)
add_subdirectory(file)
add_subdirectory(formula)
add_subdirectory(geometry)
add_subdirectory(layout)
add_subdirectory(GFX)
add_subdirectory(GUI)
add_subdirectory(i18n)
add_subdirectory(random)
add_subdirectory(skeleton)
add_subdirectory(text)
add_subdirectory(unicode)
add_subdirectory(widgets)

configure_file(metadata_impl.cpp.in metadata_impl.cpp @ONLY)

target_sources(hikogui PRIVATE
    algorithm.hpp
    arguments.hpp
    animator.hpp
    assert.hpp
    atomic.hpp
    awaitable.hpp
    awaitable_timer_impl.cpp
	awaitable_timer.hpp
    bezier.hpp
    bezier_curve_impl.cpp
    bezier_curve.hpp
    bezier_point.hpp
    bigint.hpp
    bits.hpp
    bound_integer.hpp
    byte_string.hpp
    cache.hpp
    callback_flags.hpp
    cast.hpp
    check.hpp
    chrono.hpp
    concepts.hpp
    console.hpp
    $<$<PLATFORM_ID:Windows>:${CMAKE_CURRENT_SOURCE_DIR}/console_win32_impl.cpp>
    counters_impl.cpp
    counters.hpp
    CP1252.hpp
    #cpu_id.hpp
    #$<$<STREQUAL:${CMAKE_SYSTEM_PROCESSOR}:AMD64>:${CMAKE_CURRENT_SOURCE_DIR}/cpu_id_x64_impl.cpp>
    crt.hpp
    crt_utils.hpp
    $<$<PLATFORM_ID:Windows>:${CMAKE_CURRENT_SOURCE_DIR}/crt_utils_win32_impl.cpp>
    datum.hpp
    dead_lock_detector_impl.cpp
    dead_lock_detector.hpp
    debugger.hpp
    $<$<PLATFORM_ID:Darwin>:${CMAKE_CURRENT_SOURCE_DIR}/debugger_macos.mm>
    $<$<PLATFORM_ID:Windows>:${CMAKE_CURRENT_SOURCE_DIR}/debugger_win32_impl.cpp>
    decimal.hpp
    defer.hpp
    dialog.hpp
    $<$<PLATFORM_ID:Windows>:${CMAKE_CURRENT_SOURCE_DIR}/dialog_win32_impl.cpp>
    endian.hpp
    enum_metadata.hpp
    exception_impl.cpp
    exception.hpp
    fixed.hpp
    float16.hpp
    format_check.hpp
    forward_value.hpp
	functional.hpp
	function_fifo.hpp
	function_timer.hpp
    gap_buffer.hpp
    generator.hpp
    global_state.hpp
    hash.hpp
    hash_map.hpp
    huffman.hpp
    int_carry.hpp
    int_overflow.hpp
    interval.hpp
    jsonpath.hpp
    label.hpp
    lean_vector.hpp
    locked_memory_allocator.hpp
    $<$<PLATFORM_ID:Windows>:${CMAKE_CURRENT_SOURCE_DIR}/locked_memory_allocator_win32_impl.cpp>
    log_impl.cpp
    log.hpp
    $<$<PLATFORM_ID:Darwin>:${CMAKE_CURRENT_SOURCE_DIR}/log_macos.mm>
    $<$<PLATFORM_ID:Windows>:${CMAKE_CURRENT_SOURCE_DIR}/log_win32_impl.cpp>
    long_tagged_id.hpp
	loop.hpp
    $<$<PLATFORM_ID:Windows>:${CMAKE_CURRENT_SOURCE_DIR}/loop_win32_impl.cpp>
    math.hpp
    memory.hpp
    group_ptr.hpp
    meta.hpp
    ${CMAKE_CURRENT_BINARY_DIR}/metadata_impl.cpp
    metadata.hpp
    numbers.hpp
    notifier.hpp
    cast.hpp
    observable.hpp
    observable_value.hpp
    observer.hpp
    operator.hpp
    os_settings_impl.cpp
    os_settings.hpp
    $<$<PLATFORM_ID:Windows>:${CMAKE_CURRENT_SOURCE_DIR}/os_settings_win32_impl.cpp>
    architecture.hpp
    packed_int_array.hpp
    parse_location.hpp
    preferences_impl.cpp
    preferences.hpp
    graphic_path_impl.cpp
    graphic_path.hpp
    pickle.hpp
    placement.hpp
    polymorphic_optional.hpp
    polynomial.hpp
    range_map.hpp
    ranges.hpp
    rcu.hpp
    recursive_iterator.hpp
    reflection.hpp
    $<$<PLATFORM_ID:Windows>:${CMAKE_CURRENT_SOURCE_DIR}/registry_win32_impl.cpp>
    $<$<PLATFORM_ID:Windows>:${CMAKE_CURRENT_SOURCE_DIR}/registry_win32.hpp>
    utility.hpp
    range_map.hpp
    safe_int.hpp
    semantic_version.hpp
    scoped_buffer.hpp
    scoped_task.hpp
    shared_state.hpp
    sip_hash.hpp
    small_map.hpp
    small_vector.hpp
    stack.hpp
    strings.hpp
    subsystem.hpp
    tag.hpp
    tagged_id.hpp
    tagged_map.hpp
    task.hpp
    $<$<PLATFORM_ID:Darwin>:${CMAKE_CURRENT_SOURCE_DIR}/thread_macos_impl.cpp>
    $<$<PLATFORM_ID:Windows>:${CMAKE_CURRENT_SOURCE_DIR}/thread_win32_impl.cpp>
    thread_impl.cpp
    thread.hpp
    time_stamp_count_impl.cpp
    time_stamp_count.hpp
    $<$<PLATFORM_ID:Windows>:${CMAKE_CURRENT_SOURCE_DIR}/time_stamp_count_win32_impl.cpp>
    time_stamp_utc_impl.cpp
    time_stamp_utc.hpp
    tokenizer_impl.cpp
    tokenizer.hpp
    trace_impl.cpp
    trace.hpp
    tree.hpp
    type_traits.hpp
    undo_stack.hpp
    unfair_mutex.hpp
    unfair_recursive_mutex.hpp
    vector_span.hpp
    void_span.hpp
    when_any.hpp
    wfree_fifo.hpp
    wfree_idle_count.hpp
    wfree_unordered_map.hpp
    $<$<PLATFORM_ID:Windows>:${CMAKE_CURRENT_SOURCE_DIR}/win32_headers.hpp>
)
